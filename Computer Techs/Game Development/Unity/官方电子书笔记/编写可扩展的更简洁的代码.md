
# 前言

我们写的一连串的代码可能只是一时闪过的灵感所就，或许实现了想要的功能，但这还不够。

当你的逻辑实现了功能，接下来就应该重构和清理代码了。

这篇指南汇集了业内的专家对于如何创建代码风格的建议，即时这些技巧会在前期花费你额外的精力，但在长期上来说它的帮助会非常大，保持代码的整洁可以让你和其他人更容易阅读和理解项目的代码。

## 什么样的代码是干净的

大多数游戏开发者都赞成干净的代码就是容易阅读和维护的代码。干净的代码是优雅的，高效的和可读的。

这种一致性是有原因的，作为代码的作者，你可能对你写的代码理解会比较清晰，但对其他开发者来说就不一样了。还有一个情况是，现在你去实现一些逻辑，可以早在几个月前你已经写过同样的代码了，而你却没有意识到。

写干净的代码是为了使开发更具扩展性，要符合一些生产的标准，如下：

- 遵循一致的命名约定
- 格式化代码以提高可读性
- 组织类和方法，使其保持小巧和可读性
- 对所有不是不解自明的代码提供注释

# 作为团队来开发

> 任何人都可以写出计算机能理解的代码，而好的程序员能写出人能理解的代码。

每一个开发者都不是一座孤岛，随着游戏中的技术需求越来越多时，你需要帮助。而且不可避免的是，团队成员拥有的技能和水平各不相同，这时候简洁的代码可以降低他们阅读和理解的成本，让每一个团队成员都能轻松参与进来。

下面先回顾一些基本的原则。

## KISS ( keep it simple, stupid )

即使计算机和编程已经足够困难了，工程师和开发者们还是会将事情复杂化，而KISS原则就是提醒我们去发现问题最简单的解决方案，保持代码足够精简，避免不必要的复杂性。

如果已经有成熟和简单的技术能够解决问题，那就没必要重复造轮子。例如Unity中自带的六边形瓦片地图可以用于制作策略游戏，不要自己再去写了，最好的代码就是不写任何（不必要的）代码。

## YAGNI ( you aren't gonna need it )

YAGNI原则说的是，只有当你真正需要的使用才去实现功能，不要担心未来可能会需要，当下需要做的仅仅是用最简单的方式让程序正常运行即可。

## Don't code around the problem

“Don't code around the problem"说的是，在编写代码时，不要尝试去绕过或规避问题，而是直接面对问题并解决它。

很多开发者在没有理解真正的问题或者需求的时候，就去试图实现代码，或者在没有完全弄清楚问题出现的原因之前就修改代码。

例如你在一个方法的最开始，使用了一个if-null的判空语句来修复Null Reference Exception，而你并不能确定没有在一开始做判空处理是真正导致异常的原因，因为这有可能是在方法内部的某个地方调用另一个方法时出现的异常，正确的处理应该是进行调试并查看异常的堆栈跟踪。

总结一下就是，与其添加新的代码来修复bug，不如找到问题的根源去解决问题。

## Improve increamentally every day

编写干净的代码是一个持续的过程，作为程序员应该将清理代码作为每天生活的一部分。

大部分人都不打算写出乱糟糟的代码，但随着时间的推移可能会使代码逐渐变乱。

因此你有必要花一些时间对代码持续地维护，保持它们的干净整洁。

## Make it good, not perfect

相反地，不要追求完美。当代码达到生产的标准时，就可以提交并推进后续流程了。

要在实现新功能和代码清理两者之间取得平衡，不要为了重构而重构代码，应该在你认为重构能为他人提供好处时重构。

## Plan, but adapt

“与其说编程是一种建筑，不如说是一种园艺”，软件工程是一个有机的过程，要做好事情不按预期发展的准备。

即使你绘制了最详细的图纸，然后去建造一个花园，也不能保证最后的建筑和图纸上画的一模一样。

软件设计并不像建筑师绘制蓝图那样，它更具有可塑性，机械性更少，你需要随着代码规模的增长而去做一些调整。

## Be consistent

一旦决定了如何处理某个问题，就以同样的方式解决类似的问题。

这个原则可以用在任何事情上，不管是类和方法的命名规范，还是项目文件夹和资源的组织方式等。

# 代码风格指南

对于代码的风格，微软和谷歌都提供了易理解的示例指南：

- [Microsoft C# Coding Conventions](https://docs.microsoft.com/en-us/dotnet/csharp/fundamentals/coding-style/coding-conventions)
- [C# at Google Style Guide](https://google.github.io/styleguide/csharp-style.html)

## 命名约定

>  标识符名称：标识符指的是你为各种类型（类、接口、结构体、委托或枚举）、变量或命名空间等指定的名字，必须以字母或者下划线开头。

下面是一些我们熟知的命名大小写的约定：

- Camel case：驼峰式命名法，是一种在短语中不使用空格或标点符号，而是用单个大写字母来分割单词的写作方式，第一个字母小写。局部变量和方法的参数名通常采用这种命名法。
- Pascal case：帕斯卡命名法，是驼峰式命名法的变体，第一个字母大写，之后单词的首字母也都大写。公共的字段和方法名通常采用这种命名法。
- Snake case：蛇形命名法，这种命名法使用下划线来分隔每个单词，每个字母均使用小写。
- Kebab case：短横线命名法，单词之间使用短横线分隔。这种命名法的问题在于，许多编程语言使用短横线作为减号，还有一些语言用作日期中数字的分隔符。









