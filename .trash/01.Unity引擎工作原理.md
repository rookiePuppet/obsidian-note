# 反射机制

## Unity中的反射机制

Unity引擎本质上是一个**软件**，使用它时是处于**运行中**的，也就是说我们在一个正在运行中的软件里面制作游戏。

Unity开发的本质就是在游戏引擎的基础上，利用反射和引擎提供的各种功能进行拓展开发。

## 场景中对象的本质

**GameObject**类对象是Unity引擎提供给我们的，作为场景中所有对象的根本，在游戏场景中出现的*每一个对象都是依附于GameObject对象的*。

## Transform是什么

GameObject对象必须有一个表示自己所在**位置**的信息，就像是给GameObject对象发了一个剧本告诉它表演时的位置，相当于用一个Transform类对象和GameObject类对象进行**关联**，用于设置和得到演员在世界中的位置角度缩放等信息。

## 反射机制

除了Transfrom这个表示位置的标配剧本外，我们还可以为GameObject关联其他更多的剧本（C#脚本），让它按照我们剧本中的命令来处理事情。

为演员添加剧本这个过程，就是在利用反射new一个新的剧本对象和演员进行关联。

### 举例体现

> 前提：Unity帮助我们实现了对象查找和关联

1. 修改Inspector面板中Transform的内容
    利用反射：已知对象，类名，变量名，通过反射为该对象设置变量值
2. 新建一个脚本后，添加给一个执行的GameObject对象
    利用反射：已知类型，可以获取所有公共成员，故可以在Inspector面板上创建各公共字段信息

## 游戏场景

1. 游戏场景的保存
2. 游戏场景的新建
3. 多个游戏场景**叠加**显示
    将Project窗口中的Scene拖入Hierarchy窗口，可以将多个场景叠加显示。
    主要用于快速地将一个场景中的对象复制出来。
4. 游戏场景的本质
    本质是一个**配置文件**（.untiy），其中记录了场景中所有游戏对象的信息，以及游戏对象关联的脚本信息。
    Untiy将其中的信息读取出来，通过反射来创建各个对象关联各个脚本对象。

## 预设体

> 预先设置好的物体，用来保存单个游戏对象（包含多个子对象的复杂组合）的信息，便于快速生成和修改。

本质上也是**配置文件**（.prefab），文件中内容和场景文件格式相似。

1. 创建预设体：
    选中要设置成预设体的对象，拖入Project窗口中即可。
2. 修改预设体：
    对预设体进行修改后，可以在Inspector窗口中选择Apply All来应用更改，或者Revert All来还原更改。
3. 删除预设体：
    删除预设体后，场景中相关预设体生成的对象在Hierarchy中会变红，选中其Unpack Prefab即可消除。

## 资源包的导入导出

在Project窗口右键选择Export Package即可选择需要导出的资源并导出到指定位置。

将资源包拖入Project窗口或者在Project窗口右键选择Import Package可以导入资源包。